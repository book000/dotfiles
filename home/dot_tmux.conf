# マウス操作を有効にする
set -g mouse on
# 履歴の保存行数を10000行に設定
set -g history-limit 10000
# ウィンドウのインデックスを1から開始する（デフォルトは0）
set -g base-index 1
# ウィンドウを閉じた際にインデックスを再計算して詰める
set -g renumber-windows on
# ステータスバーの更新間隔を5秒にする
set -g status-interval 5

# マウスホイールでスクロール
bind -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'select-pane -t=; copy-mode -e; send-keys -M'"
bind -n WheelDownPane select-pane -t= \; send-keys -M

# true color (24-bit color) サポートのみを有効化
# extensive フラグは OSC シーケンス（色定義など）を出力するため、
# 一部のターミナルエミュレータで問題が発生する可能性がある
set -as terminal-features ',xterm-256color:RGB'

# クライアント側の PATH を tmux サーバに同期する
# これにより、クライアントが tmux セッションにアタッチする際に最新の PATH が使用される
set -ga update-environment "PATH"

# rキーで設定ファイルをリロードする
bind r source-file ~/.tmux.conf \; display-message "Reloaded tmux.conf"

# コピーモードのキー操作をvi風にする
setw -g mode-keys vi
# エスケープキーの入力待ち時間を10ミリ秒にする（Vimなどでの操作性向上）
set -g escape-time 10

run-shell "powerline-daemon -q"
source "/usr/share/powerline/bindings/tmux/powerline.conf"
